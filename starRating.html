<!DOCTYPE html>
<html>
<body>
	<script>		
		window.addEventListener('load', gogogo, false);
		var total = 0;
		var votos = 0;
		var star0 = "<img src='0.png' alt='0'/>";
		var star05 = "<img src='05.png' alt='05'/>";
		var star1 = "<img src='1.png' alt='1'/>";
		
		function gogogo(){		
			for(i=1; i<=5; i++){
				document.getElementById(i).addEventListener("mouseover", starOver, false);
			}			
			for(i=1; i<=5; i++){
				document.getElementById(i).addEventListener("mouseout", starOut, false);
			}
			
			for(i=1; i<=5; i++){
				document.getElementById(i).addEventListener("click", starClick, false);
			}
		}
		
		function starOver(){
			for(i=1; i<=this.id; i++){
				document.getElementById(i).src = "1.png";
			}
		}
		
		function starOut(){
			for(i=1; i<=this.id; i++){
				document.getElementById(i).src = "0.png";
			}
		}

		function starClick(){
			votos++;			
			total = total + parseInt(this.id);
			var media = Math.round(parseFloat(total/votos)*2)/2;
			mostrar(media);					
			document.getElementById("info").innerHTML = "Votos: "+votos+ "\nTotal: " +total+ "\nMedia: " +media;
		}
		
		function mostrar(media) {
			var r = "";
			while(media > 0){
				if(media >= 1){
					r = r + star1;
					media = media - 1;
				}				
				else if (media < 1 && media >= 0){
					r = r + star05;
					media = media - 0.5;
				}
			}
			document.getElementById("rating").innerHTML = r;
		}
	</script>
	<div id="vota">
		<img id="1" src='0.png' alt='0'/>
		<img id="2" src='0.png' alt='0'/>
		<img id="3" src='0.png' alt='0'/>
		<img id="4" src='0.png' alt='0'/>
		<img id="5" src='0.png' alt='0'/>
	</div>
	</br>
	<p id="info"></p>
	<div id="rating">

	</div>
</body>
</html>
